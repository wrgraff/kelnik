const addElement=function(t,e){var n=document.createElement(t);return n.className=e,n};function showAlert(t){var e=addElement("div","alert"),n=addElement("div","alert__text");n.innerHTML=t;var o=addElement("div","alert__actions");e.append(n),e.append(o),document.body.append(e),setTimeout(function(){e.classList.add("alert_faded")},10),setTimeout(function(){e.classList.remove("alert_faded")},5e3),setTimeout(function(){e.remove()},5250)}function findfloatedInputs(t){const e=t.querySelectorAll(".input__field");addLabeledInputsClass(e),listenLabeledInputs(e)}function addLabeledInputsClass(t){t.forEach(t=>{t.parentElement.classList.add("input_floating")})}function listenLabeledInputs(t){t.forEach(t=>{listenLabeledInput(t)})}function listenLabeledInput(t){changeLabeledInput(t),t.addEventListener("change",()=>{changeLabeledInput(t)})}function changeLabeledInput(t){""==t.value?t.classList.remove("input__field_filled"):t.classList.add("input__field_filled")}findfloatedInputs(document);var validationForms=document.querySelectorAll("[data-validate]"),validationPatterns={email:/.+@.+\..+/i},addError=function(t,e){t.parentElement.querySelector(".input__error").innerHTML=e},checkRequired=function(t){return!t.required||""!=t.value||(addError(t,"Необходимо заполнить это поле"),!1)},checkPattern=function(t){if(!t.dataset.validatePattern||""==t.value)return!0;var e=validationPatterns[t.dataset.validatePattern],n=t.value;return e.test(n)||addError(t,"Поле заполнено неверно"),e.test(n)},validateInput=function(t,e){var n=checkRequired(t)&&checkPattern(t),o=t.value||!1;return n&&o?(t.classList.add("input__field_status_valid"),t.classList.remove("input__field_status_invalid"),!0):!n&&e?(t.classList.remove("input__field_status_valid"),t.classList.add("input__field_status_invalid"),!1):!!n||(t.classList.remove("input__field_status_valid"),!0)},validateForm=function(t){var e=t.querySelectorAll(".input__field");e.forEach(t=>{t.parentElement.append(addElement("span","input__error")),t.addEventListener("keyup",function(){validateInput(t,!1)}),t.addEventListener("click",function(){validateInput(t,!1)}),t.addEventListener("change",function(){validateInput(t,!0)}),t.addEventListener("blur",function(){validateInput(t,!0)})}),t.onsubmit=function(t){var n=!0;return e.forEach(t=>{validateInput(t,!0)||(n=n&&validateInput(t,!0))}),n}};validationForms.forEach(t=>{validateForm(t)});var scrollTopButton=addElement("button","scroll-top");document.body.append(scrollTopButton);var pageFooter=document.querySelector(".page-footer"),pageFooterTop=pageFooter.offsetTop;function scrollTopListener(){document.body.scrollTop>200||document.documentElement.scrollTop>200?scrollTopButton.classList.add("scroll-top_showed"):scrollTopButton.classList.remove("scroll-top_showed"),document.body.scrollTop>pageFooter.offsetTop-window.innerHeight||document.documentElement.scrollTop>pageFooter.offsetTop-window.innerHeight?(scrollTopButton.style.bottom=pageFooter.offsetHeight-40+"px",scrollTopButton.classList.add("scroll-top_bottom")):(scrollTopButton.removeAttribute("style"),scrollTopButton.classList.remove("scroll-top_bottom"))}function findSwitches(t){document.querySelectorAll(t).forEach(t=>{listenSwitch(t)})}function listenSwitch(t){t.addEventListener("click",t=>{let e="true"===t.target.getAttribute("aria-checked");t.target.setAttribute("aria-checked",String(!e)),t.target.setAttribute("aria-label",e?"Добавить в избранное":"Удалить из избранного"),showAlert(e?"Квартира удалена из избранного":"Квартира добавлена в избранное")})}scrollTopButton.addEventListener("click",()=>{document.documentElement.scroll({top:0,left:0,behavior:"smooth"})}),window.onscroll=function(){scrollTopListener()},findSwitches(".favorite-button");